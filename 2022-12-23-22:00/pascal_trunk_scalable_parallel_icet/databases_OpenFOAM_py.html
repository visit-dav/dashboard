<html><body bgcolor="#e0e0e0"><head><title>databases/OpenFOAM.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  OpenFOAM.py</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Hank Childs</font>
<font color="#a02030">#  Date:       September 8, 2006</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Modifications:</font>
<font color="#a02030">#    Jeremy Meredith, Tue Jul 15 10:43:58 EDT 2008</font>
<font color="#a02030">#    Changed number of vectors in vector plot to match the old behavior.</font>
<font color="#a02030">#    (We now account for how many domains there are.)</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Tue Aug 20 14:06:46 PDT 2013</font>
<font color="#a02030">#    Reader has been updated, default mesh is now 'internalMesh', and</font>
<font color="#a02030">#    variables need mesh name.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Wed Aug 28 12:04:03 PDT 2013</font>
<font color="#a02030">#    Added tests for new data, different Open Options.</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#C00000">def</font> <font color="#000000">OrigTests</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/bubbleColumn/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Vector"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh/Ua"</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">VectorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nVectors</font> <font color="#4000C0">=</font> <font color="#0080C0">400</font><font color="#4000C0">*</font><font color="#0080C0">5</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_01"</font><font color="#4000C0">)</font>

    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_02"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_03"</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_04"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh/epsilon"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_05"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/mixer2D_ascii/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Vector"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh/U"</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">VectorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nVectors</font> <font color="#4000C0">=</font> <font color="#0080C0">400</font><font color="#4000C0">*</font><font color="#0080C0">6</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_06"</font><font color="#4000C0">)</font>

    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_07"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_08"</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_09"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh/p"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_10"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestLagrangian</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/simplifiedSiwek/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># Point clouds don't exist at timestate 0, so advance by 1.</font>
    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh"</font><font color="#4000C0">)</font>
    <font color="#000000">subset</font> <font color="#4000C0">=</font> <font color="#000000">SubsetAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">subset</font><font color="#4000C0">.</font><font color="#000000">wireframe</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">subset</font><font color="#4000C0">.</font><font color="#000000">colorType</font> <font color="#4000C0">=</font> <font color="#000000">subset</font><font color="#4000C0">.</font><font color="#000000">ColorBySingleColor</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">subset</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"lagrangian/coalCloud1"</font><font color="#4000C0">)</font>
    <font color="#000000">coalMesh</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">MeshCustom</font>
    <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">meshColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">Sphere</font>
    <font color="#000000">coalMesh</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">15</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">coalMesh</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"lagrangian/limestoneCloud1"</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneMesh</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">MeshCustom</font>
    <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">meshColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">Sphere</font>
    <font color="#000000">limestoneMesh</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">15</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">limestoneMesh</font><font color="#4000C0">)</font>

    <font color="#000000">coalCloudText</font> <font color="#4000C0">=</font> <font color="#000000">CreateAnnotationObject</font><font color="#4000C0">(</font><font color="#008000">"Text2D"</font><font color="#4000C0">)</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">text</font> <font color="#4000C0">=</font> <font color="#008000">"coalCloud1"</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">height</font> <font color="#4000C0">=</font> <font color="#0080C0">0.04</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">position</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.4</font><font color="#4000C0">,</font> <font color="#0080C0">0.85</font><font color="#4000C0">)</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">useForegroundForTextColor</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">textColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>

    <font color="#000000">limestoneCloudText</font> <font color="#4000C0">=</font> <font color="#000000">CreateAnnotationObject</font><font color="#4000C0">(</font><font color="#008000">"Text2D"</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">text</font> <font color="#4000C0">=</font> <font color="#008000">"limestoneCloud1"</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">height</font> <font color="#4000C0">=</font> <font color="#0080C0">0.04</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">position</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.4</font><font color="#4000C0">,</font> <font color="#0080C0">0.75</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">useForegroundForTextColor</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">textColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>

    <font color="#000000">slider</font> <font color="#4000C0">=</font> <font color="#000000">CreateAnnotationObject</font><font color="#4000C0">(</font><font color="#008000">"TimeSlider"</font><font color="#4000C0">)</font>
    <font color="#000000">slider</font><font color="#4000C0">.</font><font color="#000000">position</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.4</font><font color="#4000C0">,</font> <font color="#0080C0">0.6</font><font color="#4000C0">)</font>
    <font color="#000000">slider</font><font color="#4000C0">.</font><font color="#000000">width</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.5</font><font color="#4000C0">)</font>
    <font color="#000000">slider</font><font color="#4000C0">.</font><font color="#000000">height</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.1</font><font color="#4000C0">)</font>

    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_01"</font><font color="#4000C0">)</font>

    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_02"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">7</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_03"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">2</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">10</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"lagrangian/coalCloud1/tTurb"</font><font color="#4000C0">)</font>
    <font color="#000000">pc</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">Sphere</font>
    <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">15</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pc</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">textColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">text</font> <font color="#4000C0">=</font> <font color="#008000">"coalcloud1/tTurb"</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">visible</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_04"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">13</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_05"</font><font color="#4000C0">)</font>
    <font color="#000000">ChangeActivePlotsVar</font><font color="#4000C0">(</font><font color="#008000">"lagrangian/limestoneCloud1/tTurb"</font><font color="#4000C0">)</font>
    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">visible</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">visible</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">textColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">text</font> <font color="#4000C0">=</font> <font color="#008000">"limestoneCloud1/tTurb"</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_06"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">16</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_lagrangian_07"</font><font color="#4000C0">)</font>

    <font color="#000000">coalCloudText</font><font color="#4000C0">.</font><font color="#000000">Delete</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">limestoneCloudText</font><font color="#4000C0">.</font><font color="#000000">Delete</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">slider</font><font color="#4000C0">.</font><font color="#000000">Delete</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TurnOffSetsByName</font><font color="#4000C0">(</font><font color="#000000">silr</font><font color="#4000C0">,</font> <font color="#000000">cat</font><font color="#4000C0">,</font> <font color="#000000">names</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">sets</font> <font color="#4000C0">=</font> <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">SetsInCategory</font><font color="#4000C0">(</font><font color="#000000">cat</font><font color="#4000C0">)</font>
    <font color="#C00000">for</font> <font color="#000000">s</font> <font color="#C00000">in</font> <font color="#000000">sets</font><font color="#4000C0">:</font>
        <font color="#000000">setname</font> <font color="#4000C0">=</font> <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">SetName</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>
        <font color="#C00000">try</font><font color="#4000C0">:</font>
            <font color="#C00000">if</font> <font color="#000000">setname</font> <font color="#C00000">in</font> <font color="#000000">names</font><font color="#4000C0">:</font>
                <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">TurnOffSet</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>
        <font color="#C00000">except</font><font color="#4000C0">:</font>
            <font color="#C00000">if</font> <font color="#000000">setname</font> <font color="#4000C0">==</font> <font color="#000000">names</font><font color="#4000C0">:</font>
                <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">TurnOffSet</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestMultiRegion</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/snappyMultiRegionHeater/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"Region"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_01"</font><font color="#4000C0">)</font>

    <font color="#000000">silr</font> <font color="#4000C0">=</font> <font color="#000000">SILRestriction</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TurnOffSetsByName</font><font color="#4000C0">(</font><font color="#000000">silr</font><font color="#4000C0">,</font> <font color="#008000">"Region"</font><font color="#4000C0">,</font> <font color="#4000C0">(</font><font color="#008000">"bottomAir, topAir"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotSILRestriction</font><font color="#4000C0">(</font><font color="#000000">silr</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_02"</font><font color="#4000C0">)</font>

    <font color="#000000">ChangeActivePlotsVar</font><font color="#4000C0">(</font><font color="#008000">"boundary(Patches)"</font><font color="#4000C0">)</font>
    <font color="#000000">silr</font> <font color="#4000C0">=</font> <font color="#000000">SILRestriction</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">TurnOnAll</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.566091</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.118534</font><font color="#4000C0">,</font> <font color="#0080C0">0.815776</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.0223539</font><font color="#4000C0">,</font> <font color="#0080C0">0.987037</font><font color="#4000C0">,</font> <font color="#0080C0">0.15893</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_03"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnDomainsOff</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#008000">"maxY"</font><font color="#4000C0">,</font> <font color="#008000">"maxZ"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_04"</font><font color="#4000C0">)</font>

    <font color="#000000">silr</font><font color="#4000C0">.</font><font color="#000000">TurnOnAll</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"heater/internalMesh/T"</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_05"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_MultiRegion_06"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestDecomposed</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">opts</font> <font color="#4000C0">=</font> <font color="#000000">GetDefaultFileOpenOptions</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM"</font><font color="#4000C0">)</font>
    <font color="#000000">opts</font><font color="#4000C0">[</font><font color="#008000">'Case Type'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font> <font color="#a02030">#Decomposed</font>
    <font color="#000000">opts</font><font color="#4000C0">[</font><font color="#008000">'Convert Cell Data To Point Data'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetDefaultFileOpenOptions</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM"</font><font color="#4000C0">,</font> <font color="#000000">opts</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/damBreakFineDecomposed/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"internalMesh/U_magnitude"</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">2</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_Decomposed_01"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">6</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_Decomposed_02"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#0080C0">8</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_Decomposed_03"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestReadZones</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">opts</font> <font color="#4000C0">=</font> <font color="#000000">GetDefaultFileOpenOptions</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM"</font><font color="#4000C0">)</font>
    <font color="#000000">opts</font><font color="#4000C0">[</font><font color="#008000">'Case Type'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font> <font color="#a02030">#Reconstructed</font>
    <font color="#000000">opts</font><font color="#4000C0">[</font><font color="#008000">'Convert Cell Data To Point Data'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">opts</font><font color="#4000C0">[</font><font color="#008000">'Read Zones'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetDefaultFileOpenOptions</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM"</font><font color="#4000C0">,</font> <font color="#000000">opts</font><font color="#4000C0">)</font>
    <font color="#a02030"># need a ReOpen because we changed the Open options, and the file</font>
    <font color="#a02030"># wasn't closed from previous test.</font>
    <font color="#000000">ReOpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_test_data/snappyMultiRegionHeater/system/controlDict"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"faceZones"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.407812</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.112136</font><font color="#4000C0">,</font> <font color="#0080C0">0.906154</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.00527397</font><font color="#4000C0">,</font> <font color="#0080C0">0.992124</font><font color="#4000C0">,</font> <font color="#0080C0">0.125148</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_ReadZones_01"</font><font color="#4000C0">)</font>
    <font color="#000000">ChangeActivePlotsVar</font><font color="#4000C0">(</font><font color="#008000">"cellZones"</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_ReadZones_02"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnDomainsOff</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#008000">"topAir"</font><font color="#4000C0">,</font> <font color="#008000">"bottomAir"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"OpenFOAM_ReadZones_03"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OrigTests</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestLagrangian</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestMultiRegion</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestDecomposed</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestReadZones</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000"></font></font></pre></body></html>
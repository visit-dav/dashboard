<html><body bgcolor="#e0e0e0"><head><title>plots/mesh.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  mesh.py</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Tests:      mesh      - 3D structured, single domain</font>
<font color="#a02030">#                        - 3D point, single domain</font>
<font color="#a02030">#                        - 2D point, single domain</font>
<font color="#a02030">#                        - 3D unstructured, single domain</font>
<font color="#a02030">#              plots     - mesh, pseudocolor</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Defect ID:  none</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Kathleen Bonnell</font>
<font color="#a02030">#  Date:       September 03, 2003</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Modifications:</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Sep  4 11:10:11 PDT 2003</font>
<font color="#a02030">#    Change the way MeshPlot&#x27;s opaque mode is set (now an enum, not a bool).</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Sep  4 11:10:11 PDT 2003</font>
<font color="#a02030">#    Added two test for new MeshAttribute &#x27;showInternal&#x27;:  mesh_globe_04</font>
<font color="#a02030">#    and mesh_rect3d_01.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Brad Whitlock, Thu Apr 8 12:50:21 PDT 2004</font>
<font color="#a02030">#    Added tests to test the auto mesh opacity flag.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Jeremy Meredith, Tue May  4 12:41:49 PDT 2004</font>
<font color="#a02030">#    Added test for unglyphed (i.e. GL_POINT) point meshes.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Tue Nov  2 16:20:55 PST 2004</font>
<font color="#a02030">#    Removed opaque-mode portion of mesh_point_01, as opaque-mode no longer</font>
<font color="#a02030">#    applies to Mesh plots of Point meshes.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Mark C. Miller, Tue Aug 19 17:31:29 PDT 2008</font>
<font color="#a02030">#    Add code to permit the test to be run with compression as well.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Mark C. Miller, Wed Jan 21 10:00:10 PST 2009</font>
<font color="#a02030">#    Removed silly comment regarding global annotation object &#x27;a&#x27;</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Mark C. Miller, Wed Jan 20 07:37:11 PST 2010</font>
<font color="#a02030">#    Added ability to swtich between Silo&#x27;s HDF5 and PDB data.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Cyrus Harrison, Thu Mar 25 09:57:34 PDT 2010</font>
<font color="#a02030">#    Added call(s) to DrawPlots() b/c of changes to the default plot state</font>
<font color="#a02030">#    behavior when an operator is added.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Wed Jun 10 17:39:23 PDT 2020</font>
<font color="#a02030">#    Move RandomColor test to be first test run so that changes in mesh plot</font>
<font color="#a02030">#    instances don&#x27;t randomly make the test fail.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Thu Jun 11 07:57:10 PDT 2020</font>
<font color="#a02030">#    Add more data files to PointMesh test, to ensure data that doesnt&#x27; set</font>
<font color="#a02030">#    topological dimension to 0, and data with mixed topology can still do</font>
<font color="#a02030">#    point glyphing and changes point size.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Wed Feb 16 09:15:45 PST 2022</font>
<font color="#a02030">#    Replace use of meshatts &#x27;foregroundFlag&#x27;, &#x27;backgroundFlag&#x27; with</font>
<font color="#a02030">#    &#x27;meshColorSource&#x27; and &#x27;opaqueColorSource&#x27; respectively.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Mon Nov 28, 2022</font>
<font color="#a02030">#    Remove obsolete mesh att &#x27;lineStyle&#x27;.</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>


<font color="#C00000">def</font> <font color="#000000">TestCurve</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh plot of a 3D curvilinear mesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;curv3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;curvmesh3d&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.37</font><font color="#4000C0">,</font> <font color="#0080C0">0.48</font><font color="#4000C0">,</font> <font color="#0080C0">0.79</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.18</font><font color="#4000C0">,</font> <font color="#0080C0">0.87</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.45</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.08</font><font color="#4000C0">,</font> <font color="#0080C0">0.08</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">2.0</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_curve_01&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Change color</font>
    <font color="#a02030"># and add a PC Plot.</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">OpaqueCustom</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">122</font><font color="#4000C0">,</font> <font color="#0080C0">200</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_curve_02&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">HideActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_curve_03&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;curv3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestPointMesh</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh plot of a point mesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;noise.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;PointVar&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">p</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">Box</font>
    <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">1.0</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">p</font><font color="#4000C0">)</font>

    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_01&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">Icosahedron</font>
    <font color="#000000">p</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">1.5</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">p</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_02&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;PointMesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">MeshCustom</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">122</font><font color="#4000C0">,</font> <font color="#0080C0">200</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">1.5</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Axis</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_03&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Point</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_04&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;noise.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;noise2d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;PointMesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Axis</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizeVarEnabled</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizeVar</font> <font color="#4000C0">=</font> <font color="#008000">&quot;PointVar&quot;</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">0.05</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_05&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Point</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizeVarEnabled</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_06&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;noise2d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;blueprint_v0.3.1_test_data/braid_3d_examples_json.root&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;points_mesh&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">MeshCustom</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">170</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.605449</font><font color="#4000C0">,</font> <font color="#0080C0">0.469667</font><font color="#4000C0">,</font> <font color="#0080C0">0.642529</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.169201</font><font color="#4000C0">,</font> <font color="#0080C0">0.864818</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.472716</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_07&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_08&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Tetrahedron</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_09&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;blueprint_v0.3.1_test_data/braid_3d_examples_json.root&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;vtk_test_data/ugrid_mixed_cells.vtk&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">lineWidth</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Point</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_10&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSizePixels</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_11&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointType</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Icosahedron</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">pointSize</font> <font color="#4000C0">=</font> <font color="#0080C0">0.5</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_point_12&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;vtk_test_data/ugrid_mixed_cells.vtk&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>


<font color="#C00000">def</font> <font color="#000000">TestGlobe</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh plot of a 3D unstructured mesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;globe.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mesh1&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">1.0</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueMode</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Off</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_globe_01&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">smoothingLevel</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Fast</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_globe_02&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">smoothingLevel</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">High</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_globe_03&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">print</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">NONE</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">smoothingLevel</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">NONE</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueMode</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Auto</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">showInternal</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">TurnMaterialsOff</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#008000">&quot;1&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;4&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Clip&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">clip</font> <font color="#4000C0">=</font> <font color="#000000">ClipAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">clip</font><font color="#4000C0">.</font><font color="#000000">plane1Status</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">clip</font><font color="#4000C0">.</font><font color="#000000">plane3Status</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">clip</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Transform&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">t</font> <font color="#4000C0">=</font> <font color="#000000">TransformAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">t</font><font color="#4000C0">.</font><font color="#000000">doRotate</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">t</font><font color="#4000C0">.</font><font color="#000000">rotateAxis</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">t</font><font color="#4000C0">.</font><font color="#000000">rotateAmount</font> <font color="#4000C0">=</font> <font color="#0080C0">112</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">t</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">&quot;actual&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_globe_04&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;globe.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestRect3d</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh plot of a 3D rectilinear mesh&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;multi_rect3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mesh1&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueMode</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Auto</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">showInternal</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>

    <font color="#a02030">#Show a small area that contains the boundary</font>
    <font color="#a02030">#between domains 1 &amp; 2 by using the box operator</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Box&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">box</font> <font color="#4000C0">=</font> <font color="#000000">BoxAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">minx</font> <font color="#4000C0">=</font> <font color="#0080C0">0.3</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxx</font> <font color="#4000C0">=</font> <font color="#0080C0">0.4</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">miny</font> <font color="#4000C0">=</font> <font color="#0080C0">0.1</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxy</font> <font color="#4000C0">=</font> <font color="#0080C0">0.2</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">minz</font> <font color="#4000C0">=</font> <font color="#0080C0">0.1</font>
    <font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxz</font> <font color="#4000C0">=</font> <font color="#0080C0">0.2</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">box</font><font color="#4000C0">)</font>

    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">&quot;actual&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.27</font><font color="#4000C0">,</font> <font color="#0080C0">0.27</font><font color="#4000C0">,</font> <font color="#0080C0">0.93</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.35</font><font color="#4000C0">,</font> <font color="#0080C0">0.15</font><font color="#4000C0">,</font> <font color="#0080C0">0.15</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.06</font><font color="#4000C0">,</font> <font color="#0080C0">0.96</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.26</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">0.139692</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">0.28</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">0.28</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_rect3d_01&quot;</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;multi_rect3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestAutoOpaqueFlag</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Testing Mesh plot&#x27;s opaque flag&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Set up a mesh plot with the auto opaque flag.</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;globe.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mesh1&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueMode</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Auto</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TurnMaterialsOn</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_01&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Add a Pseudocolor plot and make sure that the mesh plot</font>
    <font color="#a02030"># is not drawn in opaque mode.</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_02&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Hide the Pseudocolor plot and make sure that the mesh plot</font>
    <font color="#a02030"># goes opaque.</font>
    <font color="#000000">HideActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_03&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Unhide the Pseudocolor plot and then delete it. Make sure that the</font>
    <font color="#a02030"># mesh plot goes opaque.</font>
    <font color="#000000">HideActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_04&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_05&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#a02030"># Restore a session file that has a keyframe animation where the mesh</font>
    <font color="#a02030"># plot exists over all frames but the Pseudocolor plot does not.</font>
    <font color="#000000">RestoreSessionWithDifferentSources</font><font color="#4000C0">(</font><font color="#000000">tests_path</font><font color="#4000C0">(</font><font color="#008000">&quot;plots&quot;</font><font color="#4000C0">,</font><font color="#008000">&quot;mesh_opaque.session&quot;</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font>
                                       <font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;wave*.silo database&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># Turn off all annotations but preserve the background colors.</font>
    <font color="#000000">TurnOffAllAnnotations</font><font color="#4000C0">(</font><font color="#000000">GetAnnotationAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_06&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">SetTimeSliderState</font><font color="#4000C0">(</font><font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_07&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">SetTimeSliderState</font><font color="#4000C0">(</font><font color="#0080C0">9</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_opaque_08&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;globe.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestRandomColor</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Testing random color mode&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;arbpoly-zoohybrid.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#a02030"># Randomization of mesh colors is possible only at plot *creation* time.</font>
    <font color="#a02030"># Therefore, we need to adjust Mesh plot default attributes to set</font>
    <font color="#a02030"># the behavior *before* the plot is even created.</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">savedMeshAttrs</font> <font color="#4000C0">=</font> <font color="#000000">m</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">MeshRandom</font>
    <font color="#000000">SetDefaultPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_phzl&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_random_color_01&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">Foreground</font>
    <font color="#000000">SetDefaultPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_phzl&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_random_color_02&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#a02030"># Add a series of mesh plots with random opaque color</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">OpaqueRandom</font>
    <font color="#000000">SetDefaultPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">meshnames</font> <font color="#4000C0">=</font> <font color="#4000C0">[</font><font color="#008000">&quot;2D/mesh1_phzl&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_phzl2&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_zl1&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_zl2&quot;</font><font color="#4000C0">]</font>
    <font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#4000C0">(</font><font color="#000000">len</font><font color="#4000C0">(</font><font color="#000000">meshnames</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">mname</font> <font color="#4000C0">=</font> <font color="#000000">meshnames</font><font color="#4000C0">[</font><font color="#000000">i</font><font color="#4000C0">]</font>
        <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#000000">mname</font><font color="#4000C0">)</font>
        <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Transform&quot;</font><font color="#4000C0">)</font>
        <font color="#000000">ta</font> <font color="#4000C0">=</font> <font color="#000000">TransformAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">ta</font><font color="#4000C0">.</font><font color="#000000">doTranslate</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
        <font color="#000000">ta</font><font color="#4000C0">.</font><font color="#000000">translateY</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font><font color="#4000C0">*</font><font color="#000000">i</font>
        <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">ta</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_random_color_03&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;arbpoly-zoohybrid.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">SetDefaultPlotOptions</font><font color="#4000C0">(</font><font color="#000000">savedMeshAttrs</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestCustomColor</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Testing custom color mode&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;arbpoly-zoohybrid.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">meshnames</font> <font color="#4000C0">=</font> <font color="#4000C0">[</font><font color="#008000">&quot;2D/mesh1_phzl&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_phzl2&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_zl1&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;2D/mesh1_zl2&quot;</font><font color="#4000C0">]</font>
    <font color="#000000">colors</font> <font color="#4000C0">=</font> <font color="#4000C0">[</font><font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
    <font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#4000C0">(</font><font color="#000000">len</font><font color="#4000C0">(</font><font color="#000000">meshnames</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">mname</font> <font color="#4000C0">=</font> <font color="#000000">meshnames</font><font color="#4000C0">[</font><font color="#000000">i</font><font color="#4000C0">]</font>
        <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#000000">mname</font><font color="#4000C0">)</font>
        <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">OpaqueCustom</font>
        <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">opaqueColor</font> <font color="#4000C0">=</font> <font color="#000000">colors</font><font color="#4000C0">[</font><font color="#000000">i</font><font color="#4000C0">]</font>
        <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColorSource</font> <font color="#4000C0">=</font> <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">MeshCustom</font>
        <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">meshColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font>
        <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
        <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Transform&quot;</font><font color="#4000C0">)</font>
        <font color="#000000">ta</font> <font color="#4000C0">=</font> <font color="#000000">TransformAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">ta</font><font color="#4000C0">.</font><font color="#000000">doTranslate</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
        <font color="#000000">ta</font><font color="#4000C0">.</font><font color="#000000">translateY</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font><font color="#4000C0">*</font><font color="#000000">i</font>
        <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">ta</font><font color="#4000C0">)</font>
        <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_custom_color_01&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;arbpoly-zoohybrid.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestGeneratedZones</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">&quot;Testing display of generated zones&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">dbfile</font> <font color="#4000C0">=</font> <font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;mfem_test_data/escher-p3.mfem_root&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">dbfile</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Mesh&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;main&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;MultiresControl&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">mc_atts</font>  <font color="#4000C0">=</font> <font color="#000000">MultiresControlAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mc_atts</font><font color="#4000C0">.</font><font color="#000000">resolution</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">mc_atts</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_generated_zones_off&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">m</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">m</font><font color="#4000C0">.</font><font color="#000000">showGenerated</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">m</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;mesh_generated_zones_on&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">dbfile</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TurnOffAllAnnotations</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#a02030"># TODO</font>
    <font color="#a02030"># on my macOS machine this test only works if run first</font>
    <font color="#a02030"># Ohterwise it fails to open the mfem file very strange ...</font>
    <font color="#000000">TestGeneratedZones</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestRandomColor</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestCurve</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestPointMesh</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestGlobe</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestRect3d</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestAutoOpaqueFlag</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestCustomColor</font><font color="#4000C0">(</font><font color="#4000C0">)</font>


<font color="#a02030"># Added to allow this test to be run with compression too.</font>
<font color="#a02030"># Another .py file sources this file with &#x27;useCompression&#x27;</font>
<font color="#a02030"># defined.</font>
<font color="#C00000">if</font> <font color="#008000">&quot;useCompression&quot;</font> <font color="#C00000">in</font> <font color="#000000">dir</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">ra</font> <font color="#4000C0">=</font> <font color="#000000">GetRenderingAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ra</font><font color="#4000C0">.</font><font color="#000000">compressionActivationMode</font> <font color="#4000C0">=</font> <font color="#000000">ra</font><font color="#4000C0">.</font><font color="#000000">Always</font>
    <font color="#000000">SetRenderingAttributes</font><font color="#4000C0">(</font><font color="#000000">ra</font><font color="#4000C0">)</font>

<font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000"></font></font></pre></body></html>
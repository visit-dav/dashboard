<html><body bgcolor="#e0e0e0"><head><title>faulttolerance/badfile.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Tests: The quality of the error message being produced when opening a bad</font>
<font color="#a02030">#         file.</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Hank Childs</font>
<font color="#a02030">#  Date:       January 12, 2007</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#C00000">import</font> <font color="#000000">os</font>

<font color="#000000">TurnOnAllAnnotations</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Make zero-length Silo file.  The Silo reader is smart enough to not</font>
<font color="#a02030"># crash, which means we can test the normal error message.</font>
<font color="#000000">f</font> <font color="#4000C0">=</font> <font color="#000000">open</font><font color="#4000C0">(</font><font color="#008000">"junk.silo"</font><font color="#4000C0">,</font> <font color="#008000">"w"</font><font color="#4000C0">)</font>
<font color="#000000">f</font><font color="#4000C0">.</font><font color="#000000">close</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">"junk.silo"</font><font color="#4000C0">)</font>
<font color="#000000">e</font> <font color="#4000C0">=</font> <font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"badfile_01"</font><font color="#4000C0">,</font> <font color="#000000">e</font><font color="#4000C0">)</font>

<font color="#a02030"># Make zero-length VTK file.  The VTK reader crashes in this case.  If the</font>
<font color="#a02030"># VTK reader is ever improved, then we'll have to locate a reader that</font>
<font color="#a02030"># crashes successfully.  (Maybe we'll write one.)</font>
<font color="#000000">f</font> <font color="#4000C0">=</font> <font color="#000000">open</font><font color="#4000C0">(</font><font color="#008000">"junk.vtk"</font><font color="#4000C0">,</font> <font color="#008000">"w"</font><font color="#4000C0">)</font>
<font color="#000000">f</font><font color="#4000C0">.</font><font color="#000000">close</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">"junk.vtk"</font><font color="#4000C0">)</font>
<font color="#000000">e</font> <font color="#4000C0">=</font> <font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"badfile_02"</font><font color="#4000C0">,</font> <font color="#000000">e</font><font color="#4000C0">)</font>

<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#000000"></font></font></pre></body></html>
<html><body bgcolor="#e0e0e0"><head><title>quickrecipes/quantitative_operations.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Mark C. Miller, Fri Aug 26 14:31:48 PDT 2022</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#a02030">#</font>
<font color="#a02030"># Get some utils shared across many .py files used for quick recipes.</font>
<font color="#a02030">#</font>
<font color="#000000">Source</font><font color="#4000C0">(</font><font color="#000000">tests_path</font><font color="#4000C0">(</font><font color="#008000">&#x27;quickrecipes&#x27;</font><font color="#4000C0">,</font><font color="#008000">&#x27;vqr_utils.py.inc&#x27;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">defining_expressions</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># defining expressions {</font>
    <font color="#a02030"># Creating a new expression</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/noise.silo&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;hardyglobal&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;newvar&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;sin(hardyglobal) + cos(shepardglobal)&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">ChangeActivePlotsVar</font><font color="#4000C0">(</font><font color="#008000">&quot;newvar&quot;</font><font color="#4000C0">)</font>
    <font color="#a02030"># defining expressions }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;defining expressions error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;defining expressions exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;defining expressions exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">pick</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># pick {</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/noise.silo&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;hgslice&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#4000C0">[</font><font color="#4000C0">]</font>
    <font color="#a02030"># Pick by a node id</font>
    <font color="#000000">PickByNode</font><font color="#4000C0">(</font><font color="#0080C0">300</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">s</font> <font color="#4000C0">+</font> <font color="#4000C0">[</font><font color="#000000">GetPickOutput</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
    <font color="#a02030"># Pick by a cell id</font>
    <font color="#000000">PickByZone</font><font color="#4000C0">(</font><font color="#0080C0">250</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">s</font> <font color="#4000C0">+</font> <font color="#4000C0">[</font><font color="#000000">GetPickOutput</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
    <font color="#a02030"># Pick on a cell using a 3d point</font>
    <font color="#000000">Pick</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2.</font><font color="#4000C0">,</font> <font color="#0080C0">2.</font><font color="#4000C0">,</font> <font color="#0080C0">0.</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">s</font> <font color="#4000C0">+</font> <font color="#4000C0">[</font><font color="#000000">GetPickOutput</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
    <font color="#a02030"># Pick on the node closest to (-2,2,0)</font>
    <font color="#000000">NodePick</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2</font><font color="#4000C0">,</font><font color="#0080C0">2</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">s</font> <font color="#4000C0">+</font> <font color="#4000C0">[</font><font color="#000000">GetPickOutput</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
    <font color="#a02030"># Print all pick results</font>
    <font color="#000000">print</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>
    <font color="#a02030"># Will produce output somewhat like...</font>
    <font color="#a02030"># [&#x27;\nA:  noise.silo\nMesh2D \nPoint: &lt;-10, -7.55102&gt;\nNode:...</font>
    <font color="#a02030">#  &#x27;\nD:  noise.silo\nMesh2D \nPoint: &lt;-1.83673, 1.83673&gt;\nNode:...</font>
    <font color="#a02030">#  ...\nhgslice:  &lt;nodal&gt; = 4.04322\n\n&#x27;]</font>
    <font color="#a02030"># pick }</font>
    <font color="#000000">TestValueIN</font><font color="#4000C0">(</font><font color="#008000">&#x27;pick string&#x27;</font><font color="#4000C0">,</font><font color="#000000">s</font><font color="#4000C0">[</font><font color="#0080C0">0</font><font color="#4000C0">]</font><font color="#4000C0">,</font><font color="#008000">&#x27;hgslice:  &lt;nodal&gt; = 2.472&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestValueIN</font><font color="#4000C0">(</font><font color="#008000">&#x27;pick string&#x27;</font><font color="#4000C0">,</font><font color="#000000">s</font><font color="#4000C0">[</font><font color="#0080C0">3</font><font color="#4000C0">]</font><font color="#4000C0">,</font><font color="#008000">&#x27;hgslice:  &lt;nodal&gt; = 4.043&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;pick error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;pick exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;pick exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">lineout1</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># lineout 1 {</font>
    <font color="#000000">p0</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">5</font><font color="#4000C0">,</font><font color="#4000C0">-</font><font color="#0080C0">3</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">p1</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font> <font color="#0080C0">5</font><font color="#4000C0">,</font> <font color="#0080C0">8</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/noise.silo&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;hardyglobal&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Lineout</font><font color="#4000C0">(</font><font color="#000000">p0</font><font color="#4000C0">,</font> <font color="#000000">p1</font><font color="#4000C0">)</font>
    <font color="#a02030"># Specify 65 sample points</font>
    <font color="#000000">Lineout</font><font color="#4000C0">(</font><font color="#000000">p0</font><font color="#4000C0">,</font> <font color="#000000">p1</font><font color="#4000C0">,</font> <font color="#0080C0">65</font><font color="#4000C0">)</font>
    <font color="#a02030"># Do three variables (&quot;default&quot; is &quot;hardyglobal&quot;)</font>
    <font color="#000000">Lineout</font><font color="#4000C0">(</font><font color="#000000">p0</font><font color="#4000C0">,</font> <font color="#000000">p1</font><font color="#4000C0">,</font> <font color="#4000C0">(</font><font color="#008000">&quot;default&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;airVf&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;radial&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># lineout 1 }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 1 error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 1 exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 1 exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#a02030"># No cleanup because next method uses results from this</font>
  <font color="#a02030"># DeleteWindow()</font>
  <font color="#a02030"># vqr_cleanup()</font>

<font color="#C00000">def</font> <font color="#000000">lineout2</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># lineout 2 {</font>
    <font color="#a02030"># Set active window to one containing Lineout curve plots (typically #2)</font>
    <font color="#000000">SetActiveWindow</font><font color="#4000C0">(</font><font color="#0080C0">2</font><font color="#4000C0">)</font>
    <font color="#a02030"># Get array of x,y pairs for first curve plot in window</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">hg_vals</font> <font color="#4000C0">=</font> <font color="#000000">GetPlotInformation</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">[</font><font color="#008000">&quot;Curve&quot;</font><font color="#4000C0">]</font>
    <font color="#a02030"># Get array of x,y pairs for second curve plot in window</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">avf_vals</font> <font color="#4000C0">=</font> <font color="#000000">GetPlotInformation</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">[</font><font color="#008000">&quot;Curve&quot;</font><font color="#4000C0">]</font>
    <font color="#a02030"># Get array of x,y pairs for third curve plot in window</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">2</font><font color="#4000C0">)</font>
    <font color="#000000">rad_vals</font> <font color="#4000C0">=</font> <font color="#000000">GetPlotInformation</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">[</font><font color="#008000">&quot;Curve&quot;</font><font color="#4000C0">]</font>

    <font color="#a02030"># Write it as CSV data to a file</font>
    <font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#4000C0">(</font><font color="#000000">int</font><font color="#4000C0">(</font><font color="#000000">len</font><font color="#4000C0">(</font><font color="#000000">hg_vals</font><font color="#4000C0">)</font> <font color="#4000C0">/</font> <font color="#0080C0">2</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">idx</font> <font color="#4000C0">=</font> <font color="#000000">i</font><font color="#4000C0">*</font><font color="#0080C0">2</font><font color="#4000C0">+</font><font color="#0080C0">1</font> <font color="#a02030"># take only y-values in each array</font>
        <font color="#000000">print</font><font color="#4000C0">(</font><font color="#008000">&quot;%g,%g,%g&quot;</font> <font color="#4000C0">%</font> <font color="#4000C0">(</font><font color="#000000">hg_vals</font><font color="#4000C0">[</font><font color="#000000">idx</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">avf_vals</font><font color="#4000C0">[</font><font color="#000000">idx</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">rad_vals</font><font color="#4000C0">[</font><font color="#000000">idx</font><font color="#4000C0">]</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># lineout 2 }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 2 error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 2 exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;lineout 2 exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">DeleteWindow</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">query</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># query {</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/noise.silo&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;hardyglobal&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">&quot;NumNodes&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">print</font><font color="#4000C0">(</font><font color="#008000">&quot;The float value is: %g&quot;</font> <font color="#4000C0">%</font> <font color="#000000">GetQueryOutputValue</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">&quot;NumNodes&quot;</font><font color="#4000C0">)</font>
    <font color="#a02030"># query }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;query error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;query exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;query exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">finding_the_min_and_max</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># finding the min and max {</font>
    <font color="#a02030"># Define a helper function to get node/zone id&#x27;s from query string.</font>
    <font color="#C00000">def</font> <font color="#000000">GetMinMaxIds</font><font color="#4000C0">(</font><font color="#000000">qstr</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#C00000">import</font> <font color="#000000">string</font>
        <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">qstr</font><font color="#4000C0">.</font><font color="#000000">split</font><font color="#4000C0">(</font><font color="#008000">&#x27; &#x27;</font><font color="#4000C0">)</font>
        <font color="#000000">retval</font> <font color="#4000C0">=</font> <font color="#4000C0">[</font><font color="#4000C0">]</font>
        <font color="#000000">nextGood</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
        <font color="#000000">idType</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
        <font color="#C00000">for</font> <font color="#000000">token</font> <font color="#C00000">in</font> <font color="#000000">s</font><font color="#4000C0">:</font>
            <font color="#C00000">if</font> <font color="#000000">token</font> <font color="#4000C0">==</font> <font color="#008000">&quot;(zone&quot;</font> <font color="#C00000">or</font> <font color="#000000">token</font> <font color="#4000C0">==</font> <font color="#008000">&quot;(cell&quot;</font><font color="#4000C0">:</font>
                <font color="#000000">idType</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
                <font color="#000000">nextGood</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
                <font color="#C00000">continue</font>
            <font color="#C00000">elif</font> <font color="#000000">token</font> <font color="#4000C0">==</font> <font color="#008000">&quot;(node&quot;</font><font color="#4000C0">:</font>
                <font color="#000000">idType</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
                <font color="#000000">nextGood</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
                <font color="#C00000">continue</font>
            <font color="#C00000">if</font> <font color="#000000">nextGood</font> <font color="#4000C0">==</font> <font color="#0080C0">1</font><font color="#4000C0">:</font>
                <font color="#000000">nextGood</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
                <font color="#000000">retval</font> <font color="#4000C0">=</font> <font color="#000000">retval</font> <font color="#4000C0">+</font> <font color="#4000C0">[</font><font color="#4000C0">(</font><font color="#000000">idType</font><font color="#4000C0">,</font> <font color="#000000">int</font><font color="#4000C0">(</font><font color="#000000">token</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">]</font>
        <font color="#C00000">return</font> <font color="#000000">retval</font>

    <font color="#a02030"># Set up a plot</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/noise.silo&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;hgslice&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">&quot;MinMax&quot;</font><font color="#4000C0">)</font>

    <font color="#a02030"># Do picks on the ids that were returned by MinMax.</font>
    <font color="#C00000">for</font> <font color="#000000">ids</font> <font color="#C00000">in</font> <font color="#000000">GetMinMaxIds</font><font color="#4000C0">(</font><font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">idType</font> <font color="#4000C0">=</font> <font color="#000000">ids</font><font color="#4000C0">[</font><font color="#0080C0">0</font><font color="#4000C0">]</font>
        <font color="#000000">id</font> <font color="#4000C0">=</font> <font color="#000000">ids</font><font color="#4000C0">[</font><font color="#0080C0">1</font><font color="#4000C0">]</font>
        <font color="#C00000">if</font> <font color="#000000">idType</font> <font color="#4000C0">==</font> <font color="#0080C0">0</font><font color="#4000C0">:</font>
            <font color="#000000">PickByNode</font><font color="#4000C0">(</font><font color="#000000">id</font><font color="#4000C0">)</font>
        <font color="#C00000">else</font><font color="#4000C0">:</font>
            <font color="#000000">PickByZone</font><font color="#4000C0">(</font><font color="#000000">id</font><font color="#4000C0">)</font>
    <font color="#a02030"># finding the min and max }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;finding the min and max error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;finding the min and max exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;finding the min and max exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">csv_query_over_time</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>

  <font color="#C00000">try</font><font color="#4000C0">:</font>
    <font color="#a02030"># csv query over time {</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;~juanita/silo/stuff/wave.visit&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;pressure&quot;</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">n_time_steps</font> <font color="#4000C0">=</font> <font color="#000000">TimeSliderGetNStates</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">f</font> <font color="#4000C0">=</font> <font color="#000000">open</font><font color="#4000C0">(</font><font color="#008000">&#x27;points.txt&#x27;</font><font color="#4000C0">,</font> <font color="#008000">&#x27;w&#x27;</font><font color="#4000C0">,</font> <font color="#000000">encoding</font><font color="#4000C0">=</font><font color="#008000">&#x27;utf-8&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">f</font><font color="#4000C0">.</font><font color="#000000">write</font><font color="#4000C0">(</font><font color="#008000">&#x27;time, x, y, z, u, v, w\n&#x27;</font><font color="#4000C0">)</font>
    <font color="#C00000">for</font> <font color="#000000">time_step</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#000000">n_time_steps</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">TimeSliderSetState</font><font color="#4000C0">(</font><font color="#000000">time_step</font><font color="#4000C0">)</font>
        <font color="#000000">pick</font> <font color="#4000C0">=</font> <font color="#000000">PickByNode</font><font color="#4000C0">(</font><font color="#000000">domain</font><font color="#4000C0">=</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#000000">element</font><font color="#4000C0">=</font><font color="#0080C0">3726</font><font color="#4000C0">,</font> <font color="#000000">vars</font><font color="#4000C0">=</font><font color="#4000C0">[</font><font color="#008000">&quot;u&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;v&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;w&quot;</font><font color="#4000C0">]</font><font color="#4000C0">)</font>
        <font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">&quot;Time&quot;</font><font color="#4000C0">)</font>
        <font color="#000000">time</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputValue</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">f</font><font color="#4000C0">.</font><font color="#000000">write</font><font color="#4000C0">(</font><font color="#008000">&#x27;%g, %g, %g, %g, %g, %g, %g\n&#x27;</font> <font color="#4000C0">%</font> <font color="#4000C0">(</font><font color="#000000">time</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;point&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">[</font><font color="#0080C0">0</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;point&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">[</font><font color="#0080C0">1</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;point&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">[</font><font color="#0080C0">2</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;u&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;v&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">,</font> <font color="#000000">pick</font><font color="#4000C0">[</font><font color="#008000">&#x27;w&#x27;</font><font color="#4000C0">]</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">f</font><font color="#4000C0">.</font><font color="#000000">close</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#a02030"># csv query over time }</font>
    <font color="#000000">TestValueEQ</font><font color="#4000C0">(</font><font color="#008000">&#x27;csv query over time error message&#x27;</font><font color="#4000C0">,</font><font color="#000000">GetLastError</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">,</font><font color="#008000">&#x27;&#x27;</font><font color="#4000C0">)</font>
    <font color="#000000">TestPOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;csv query over time exceptions&#x27;</font><font color="#4000C0">)</font>
  <font color="#C00000">except</font> <font color="#000000">Exception</font> <font color="#C00000">as</font> <font color="#000000">inst</font><font color="#4000C0">:</font>
    <font color="#000000">TestFOA</font><font color="#4000C0">(</font><font color="#008000">&#x27;csv query over time exception &quot;%s&quot;&#x27;</font><font color="#4000C0">%</font><font color="#000000">str</font><font color="#4000C0">(</font><font color="#000000">inst</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">LINE</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#C00000">pass</font>
  <font color="#000000">vqr_cleanup</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">defining_expressions</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">pick</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">lineout1</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">lineout2</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">query</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">finding_the_min_and_max</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">csv_query_over_time</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000"></font></font></pre></body></html>
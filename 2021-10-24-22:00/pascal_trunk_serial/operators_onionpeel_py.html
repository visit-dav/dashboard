<html><body bgcolor="#e0e0e0"><head><title>operators/onionpeel.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  onionpeel.py</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Tests:      mesh      - 3D rectilinear, mulitple domain, mulitple groups</font>
<font color="#a02030">#              plots     - subset</font>
<font color="#a02030">#              operators - onionpeel</font>
<font color="#a02030">#              selection - none</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Defect ID:  </font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Kathleen Bonnell </font>
<font color="#a02030">#  Date:       December 23, 2003 </font>
<font color="#a02030">#</font>
<font color="#a02030">#  Modifications:</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Feb 26 15:31:31 PST 2004</font>
<font color="#a02030">#    Added TestUCD.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Wed Dec 15 15:24:50 PST 2004 </font>
<font color="#a02030">#    Added TestGlobalZoneId.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Tue Jan 18 19:34:41 PST 2005 </font>
<font color="#a02030">#    Added TestMatSelect.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Wed Jan 19 15:45:38 PST 2005 </font>
<font color="#a02030">#    Added TestNodeId.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Tue Jun 14 11:33:39 PDT 2005 </font>
<font color="#a02030">#    Added TestFilledBoundary.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Jul 21 09:09:26 PDT 2005 </font>
<font color="#a02030">#    Modified indices used in TestBigSil, to match corrsponding changes</font>
<font color="#a02030">#    to bigsil.silo. </font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Fri Aug 19 16:23:45 PDT 2005 </font>
<font color="#a02030">#    Modified indices used in TestBigSil, more changes to bigsil.silo. </font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Sep 22 11:59:42 PDT 2005 </font>
<font color="#a02030">#    Added TestBoundary. </font>
<font color="#a02030">#</font>
<font color="#a02030">#    Mark C. Miller, Wed Jan 20 07:37:11 PST 2010</font>
<font color="#a02030">#    Added ability to swtich between Silo's HDF5 and PDB data.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Cyrus Harrison, Thu Mar 25 09:57:34 PDT 2010</font>
<font color="#a02030">#    Added call(s) to DrawPlots() b/c of changes to the default plot state</font>
<font color="#a02030">#    behavior when an operator is added.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Fri Jul 25 15:10:11 MST 2014</font>
<font color="#a02030">#    Added ArbPoly test, which demonstrates use of new att: honorOriginalMesh.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Mon Mar 23 17:25:07 PDT 2015</font>
<font color="#a02030">#    Modified AMR test to include the default Subset plot, now that it</font>
<font color="#a02030">#    is fixed.</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#C00000">def</font> <font color="#000000">TestBigSil</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"bigsil.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>


    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"domains"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"blocks"</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">SubsetAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">legendFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">wireframe</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">colorType</font> <font color="#4000C0">=</font> <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">ColorBySingleColor</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">singleColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>

    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"blocks"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"block0"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">4</font><font color="#4000C0">,</font> <font color="#0080C0">11</font><font color="#4000C0">,</font> <font color="#0080C0">5</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">3</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_01"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"block1"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">18</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">,</font> <font color="#0080C0">5</font><font color="#4000C0">)</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_02"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"block2"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">11</font><font color="#4000C0">,</font> <font color="#0080C0">18</font><font color="#4000C0">,</font> <font color="#0080C0">5</font><font color="#4000C0">)</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_03"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestUCD</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># This is to test that onion peel will work (by default)</font>
    <font color="#a02030"># on the first "On" set -- in this case "domain4".</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_ucd3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
    <font color="#000000">domains</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"domain4"</font><font color="#4000C0">,</font> <font color="#008000">"domain5"</font><font color="#4000C0">,</font> <font color="#008000">"domain6"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnDomainsOff</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TurnDomainsOn</font><font color="#4000C0">(</font><font color="#000000">domains</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"actual"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_04"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestGlobalZoneId</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># This is to test that onion peel will work when </font>
    <font color="#a02030"># a global cell number is specified. </font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"global_node.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">TurnDomainsOn</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"domains"</font><font color="#4000C0">)</font>
    <font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">SubsetAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">legendFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">wireframe</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">colorType</font> <font color="#4000C0">=</font> <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">ColorBySingleColor</font>
    <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">singleColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">100</font><font color="#4000C0">,</font><font color="#0080C0">255</font><font color="#4000C0">)</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"dist"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"domains"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"domain5"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">372</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">7</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>

    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"original"</font><font color="#4000C0">)</font>

    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_05"</font><font color="#4000C0">)</font>

    <font color="#a02030">#only change is to specify that seed cell is global</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">useGlobalId</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_06"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestMatSelect</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"FilledBoundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">8</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"actual"</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_07"</font><font color="#4000C0">)</font>

    <font color="#000000">TurnMaterialsOff</font><font color="#4000C0">(</font><font color="#008000">"1"</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_08"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"globe.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"u"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnMaterialsOff</font><font color="#4000C0">(</font><font color="#008000">"4"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">27</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_09"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnMaterialsOn</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestNodeId</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"ucd2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"ucdmesh2d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_10"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_11"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_12"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"quadmesh3d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">TurnMaterialsOff</font><font color="#4000C0">(</font><font color="#008000">"1"</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">44</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"actual"</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_13"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">12</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_14"</font><font color="#4000C0">)</font>
    <font color="#000000">TurnMaterialsOn</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestFilledBoundary</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># need to test index on high-side</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"quadmesh3d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"FilledBoundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">15735</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"actual"</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_15"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">32713</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_16"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"globe.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"mesh1"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"FilledBoundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">742</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_17"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">1117</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_18"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">6</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">965</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_19"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"curvmesh3d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"FilledBoundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">19412</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2.29977</font><font color="#4000C0">,</font> <font color="#0080C0">0.966088</font><font color="#4000C0">,</font> <font color="#0080C0">16.5</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">5.61745</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">11.2349</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">11.2349</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.00484124</font><font color="#4000C0">,</font> <font color="#0080C0">0.00104964</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">4.08886</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2.29977</font><font color="#4000C0">,</font> <font color="#0080C0">0.966088</font><font color="#4000C0">,</font> <font color="#0080C0">16.5</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_20"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>


<font color="#C00000">def</font> <font color="#000000">TestBoundary</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># need to test index on high-side</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"quadmesh3d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Boundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">15735</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">adjacencyType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">Face</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#008000">"actual"</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_21"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">1370</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_22"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"globe.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"mesh1"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Boundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font><font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">17</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_23"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">117</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_24"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">6</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">13</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_25"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"curvmesh3d"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Boundary"</font><font color="#4000C0">,</font> <font color="#008000">"mat1"</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">5</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#0080C0">19472</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2.29977</font><font color="#4000C0">,</font> <font color="#0080C0">0.966088</font><font color="#4000C0">,</font> <font color="#0080C0">16.5</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">5.61745</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">11.2349</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">11.2349</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.00484124</font><font color="#4000C0">,</font> <font color="#0080C0">0.00104964</font><font color="#4000C0">)</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">4.08886</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">2.29977</font><font color="#4000C0">,</font> <font color="#0080C0">0.966088</font><font color="#4000C0">,</font> <font color="#0080C0">16.5</font><font color="#4000C0">)</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"ops_onionpeel_26"</font><font color="#4000C0">)</font>
    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestArbPoly</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">"Arbitrary Polyhedra, honor original mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"arbpoly-zoohybrid.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"gzid"</font><font color="#4000C0">,</font> <font color="#008000">"global_zoneid(&lt;3D/mesh1&gt;)"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"3D/mesh1"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"gzid"</font><font color="#4000C0">)</font>
    <font color="#000000">pc</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">colorTableName</font><font color="#4000C0">=</font><font color="#008000">"levels"</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pc</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">SetQueryOutputToObject</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#a02030"># there are only 11 zones in original mesh</font>
    <font color="#a02030"># when NumZonesQuery is fixed, can use it instead</font>
    <font color="#a02030"># SetActivePlots(0)</font>
    <font color="#a02030"># numZones = Query("NumZones", use_actual_data=0)['num_zones']</font>
    <font color="#a02030"># SetActivePlots(1)</font>
    <font color="#000000">numZones</font> <font color="#4000C0">=</font> <font color="#0080C0">11</font>
    <font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#4000C0">(</font><font color="#000000">numZones</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#000000">i</font>
        <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
        <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"poly_originalMesh_%02d"</font><font color="#4000C0">%</font><font color="#000000">i</font><font color="#4000C0">)</font>

    <font color="#000000">TestSection</font><font color="#4000C0">(</font><font color="#008000">"Arbitrary Polyhedra, honor actual mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">honorOriginalMesh</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">numZones</font> <font color="#4000C0">=</font> <font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"NumZones"</font><font color="#4000C0">,</font> <font color="#000000">use_actual_data</font><font color="#4000C0">=</font><font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">[</font><font color="#008000">'num_zones'</font><font color="#4000C0">]</font>
    <font color="#000000">print</font><font color="#4000C0">(</font><font color="#008000">"numZones: "</font><font color="#4000C0">,</font> <font color="#000000">numZones</font><font color="#4000C0">)</font>
    <font color="#000000">SetActivePlots</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font> <font color="#4000C0">(</font><font color="#000000">numZones</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
        <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#000000">i</font>
        <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">)</font>
        <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
        <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"poly_actualMesh%02d"</font><font color="#4000C0">%</font><font color="#000000">i</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestBigSilMesh</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># use actual spatial extents</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>

    <font color="#a02030"># non-logical index</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"bigsil.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">mesh</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mesh</font><font color="#4000C0">.</font><font color="#000000">showInternal</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">mesh</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Label"</font><font color="#4000C0">,</font> <font color="#008000">"mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">label</font> <font color="#4000C0">=</font> <font color="#000000">LabelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showNodes</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showCells</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">drawLabelsFacing</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">FrontAndBack</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">labelDisplayFormat</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">Index</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor1</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor1</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor2</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor2</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">depthTestMode</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">LABEL_DT_NEVER</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">label</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"domains"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"domain14"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">211</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"bigsil_mesh_01"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">223</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"bigsil_mesh_02"</font><font color="#4000C0">)</font>

    <font color="#a02030"># Blocks/Domains, logical index</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">3</font><font color="#4000C0">,</font> <font color="#0080C0">2</font><font color="#4000C0">,</font> <font color="#0080C0">3</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"bigsil_mesh_03"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">6</font><font color="#4000C0">,</font> <font color="#0080C0">3</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"bigsil_mesh_04"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"bigsil.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># use original spatial extents</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">TestAMR</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#a02030"># AMR Mesh</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/sil_changes/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#a02030"># use actual spatial extents</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"amr_mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">mesh</font> <font color="#4000C0">=</font> <font color="#000000">MeshAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mesh</font><font color="#4000C0">.</font><font color="#000000">showInternal</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">mesh</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Label"</font><font color="#4000C0">,</font> <font color="#008000">"amr_mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">label</font> <font color="#4000C0">=</font> <font color="#000000">LabelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showNodes</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showCells</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">drawLabelsFacing</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">FrontAndBack</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">labelDisplayFormat</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">Index</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor1</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor1</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor2</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor2</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">depthTestMode</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">LABEL_DT_NEVER</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">label</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"levels"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"level2"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">11</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">,</font> <font color="#0080C0">8</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_3d_01"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">10</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">,</font> <font color="#0080C0">8</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_3d_02"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/sil_changes/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#a02030"># Test Vector plot</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/mats-par3/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"amr_mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Vector"</font><font color="#4000C0">,</font> <font color="#008000">"Velocity"</font><font color="#4000C0">)</font>
    <font color="#000000">TimeSliderNextState</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"levels"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"level1"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">12</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">,</font> <font color="#0080C0">10</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_3d_03"</font><font color="#4000C0">)</font>

    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedNode</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">13</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">,</font> <font color="#0080C0">10</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_3d_04"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/mats-par3/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#a02030"># 2D AMR Mesh</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/ale2d/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#a02030"># use actual spatial extents</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">)</font>

    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"amr_mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Contour"</font><font color="#4000C0">,</font> <font color="#008000">"Density"</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"levels"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"level2"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">384</font><font color="#4000C0">,</font> <font color="#0080C0">490</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font><font color="#4000C0">;</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_2d_01"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"samrai_test_data/ale2d/dumps.visit"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">data_path</font><font color="#4000C0">(</font><font color="#008000">"AMRStitchCell_test_data/AMRStitchCellTest.1.no_ghost.phi.2d.hdf5"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Subset"</font><font color="#4000C0">,</font> <font color="#008000">"levels"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Mesh"</font><font color="#4000C0">,</font> <font color="#008000">"Mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Contour"</font><font color="#4000C0">,</font> <font color="#008000">"phi"</font><font color="#4000C0">)</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Label"</font><font color="#4000C0">,</font> <font color="#008000">"Mesh"</font><font color="#4000C0">)</font>
    <font color="#000000">label</font> <font color="#4000C0">=</font> <font color="#000000">LabelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showNodes</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">showCells</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">drawLabelsFacing</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">FrontAndBack</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">labelDisplayFormat</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">Index</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor1</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor1</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">specifyTextColor2</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">textColor2</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">depthTestMode</font> <font color="#4000C0">=</font> <font color="#000000">label</font><font color="#4000C0">.</font><font color="#000000">LABEL_DT_NEVER</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">label</font><font color="#4000C0">)</font>

    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"OnionPeel"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">op</font> <font color="#4000C0">=</font> <font color="#000000">OnionPeelAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">categoryName</font> <font color="#4000C0">=</font> <font color="#008000">"levels"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">subsetName</font> <font color="#4000C0">=</font> <font color="#008000">"level2"</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">logical</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">seedType</font> <font color="#4000C0">=</font> <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">SeedCell</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">requestedLayer</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">op</font><font color="#4000C0">.</font><font color="#000000">index</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">24</font><font color="#4000C0">,</font> <font color="#0080C0">35</font><font color="#4000C0">)</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">op</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"amr_2d_02"</font><font color="#4000C0">)</font>
    <font color="#a02030"># use original spatial extents</font>
    <font color="#000000">SetViewExtentsType</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">TestBigSil</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestUCD</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestGlobalZoneId</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestMatSelect</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestNodeId</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestFilledBoundary</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestBoundary</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestArbPoly</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestBigSilMesh</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">TestAMR</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000"></font></font></pre></body></html>
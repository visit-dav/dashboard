<html><body bgcolor="#e0e0e0"><head><title>operators/remap.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  remap.py</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Tests:      remap operator</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Defect ID:  none</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Eddie Rusu</font>
<font color="#a02030">#  Date:       Fri Feb  1 11:16:24 PST 2019</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#C00000">def</font> <font color="#000000">remap</font><font color="#4000C0">(</font><font color="#000000">cells</font><font color="#4000C0">,</font> <font color="#000000">type</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">"Remap"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">RemapAtts</font> <font color="#4000C0">=</font> <font color="#000000">RemapAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">RemapAtts</font><font color="#4000C0">.</font><font color="#000000">cellsX</font> <font color="#4000C0">=</font> <font color="#000000">cells</font>
    <font color="#000000">RemapAtts</font><font color="#4000C0">.</font><font color="#000000">cellsY</font> <font color="#4000C0">=</font> <font color="#000000">cells</font>
    <font color="#000000">RemapAtts</font><font color="#4000C0">.</font><font color="#000000">cellsZ</font> <font color="#4000C0">=</font> <font color="#000000">cells</font>
    <font color="#C00000">if</font> <font color="#000000">type</font> <font color="#4000C0">==</font> <font color="#0080C0">1</font><font color="#4000C0">:</font>
        <font color="#000000">RemapAtts</font><font color="#4000C0">.</font><font color="#000000">variableType</font> <font color="#4000C0">=</font> <font color="#000000">RemapAtts</font><font color="#4000C0">.</font><font color="#000000">extrinsic</font>
        <font color="#000000">setPseudoOptions</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">RemapAtts</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">setPseudoOptions</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">PseudocolorAtts</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">PseudocolorAtts</font><font color="#4000C0">.</font><font color="#000000">limitsMode</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAtts</font><font color="#4000C0">.</font><font color="#000000">CurrentPlot</font>
    <font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">PseudocolorAtts</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">set3DView</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">View3DAtts</font> <font color="#4000C0">=</font> <font color="#000000">View3DAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.7</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1.5</font><font color="#4000C0">,</font> <font color="#0080C0">1.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.0429563</font><font color="#4000C0">,</font> <font color="#0080C0">0.998733</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.0262205</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">2.17945</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">4.3589</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">4.3589</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1.5</font><font color="#4000C0">,</font> <font color="#0080C0">1.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">axis3DScaleFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">axis3DScales</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">shear</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">View3DAtts</font><font color="#4000C0">.</font><font color="#000000">windowValid</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">View3DAtts</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#000000">varName</font><font color="#4000C0">,</font> <font color="#000000">saveName</font><font color="#4000C0">,</font> <font color="#000000">cells</font> <font color="#4000C0">=</font> <font color="#0080C0">10</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#000000">varName</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

    <font color="#000000">remap</font><font color="#4000C0">(</font><font color="#000000">cells</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#000000">saveName</font> <font color="#4000C0">+</font> <font color="#008000">"_int"</font><font color="#4000C0">)</font>

    <font color="#000000">RemoveOperator</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">remap</font><font color="#4000C0">(</font><font color="#000000">cells</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
    <font color="#000000">Test</font><font color="#4000C0">(</font><font color="#000000">saveName</font> <font color="#4000C0">+</font> <font color="#008000">"_ext"</font><font color="#4000C0">)</font>

    <font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">ghost1</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"ghost1.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"zvar"</font><font color="#4000C0">,</font> <font color="#008000">"ghost_zvar"</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"ghost1.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">globalNode</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"global_node.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">set3DView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"globalNode_p"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font> <font color="#a02030"># Wrong results.</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"global_node.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">mCurve2</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve2_d"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d_dup"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve2_d_dup"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"nmats"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve2_nmats"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve2_p"</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">mCurve3</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">set3DView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve3_d"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d_dup"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve3_d_dup"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"nmats"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve3_nmats"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"mCurve3_p"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">mRect2</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_rect2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"mRect2_d"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d_dup"</font><font color="#4000C0">,</font> <font color="#008000">"mRect2_d_dup"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"nmats"</font><font color="#4000C0">,</font> <font color="#008000">"mRect2_nmats"</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"mRect2_p"</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_rect2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">mRect3</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">set3DView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"mRect3_d"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"d_dup"</font><font color="#4000C0">,</font> <font color="#008000">"mRect3_d_dup"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"nmats"</font><font color="#4000C0">,</font> <font color="#008000">"mRect3_nmats"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"mRect3_p"</font><font color="#4000C0">,</font> <font color="#0080C0">4</font><font color="#4000C0">)</font>
    <font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_rect3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">ucd2</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"ucd2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
    <font color="#000000">plotVariables</font><font color="#4000C0">(</font><font color="#008000">"p"</font><font color="#4000C0">,</font> <font color="#008000">"ucd2_p"</font><font color="#4000C0">)</font>
    <font color="#000000">CloseDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"ucd2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">ghost1</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">globalNode</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mCurve2</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mCurve3</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mRect2</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">mRect3</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
    <font color="#000000">ucd2</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">Main</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#000000"></font></font></pre></body></html>
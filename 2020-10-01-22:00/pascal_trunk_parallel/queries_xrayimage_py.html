<html><body bgcolor="#e0e0e0"><head><title>queries/xrayimage.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  xrayimage.py</font>
<font color="#a02030">#  Tests:      queries     - xray imagel</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Eric Brugger</font>
<font color="#a02030">#  Date:       July 13, 2010</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Modifications:</font>
<font color="#a02030">#    Kathleen Bonnell, Thu Jul 14 10:44:55 PDT 2011</font>
<font color="#a02030">#    Change most of code to use python dictionary to pass query parameters.</font>
<font color="#a02030">#    First call to 'Query' still tests old-style argument passing.</font>
<font color="#a02030">#    Second call to 'Query' creates a Python dictionary from scratch and</font>
<font color="#a02030">#    uses that.  Prior to third call to Query, retrieve default dictionary via</font>
<font color="#a02030">#    GetQueryParameters.  All subsequent calls to Query modify that dictionary </font>
<font color="#a02030">#    object as necessary and pass it.</font>
<font color="#a02030">#</font>
<font color="#a02030">#    Kathleen Biagas, Wed Oct 17 14:25:05 PDT 2012</font>
<font color="#a02030">#    Show usage of new 'up_vector' parameter.</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>

<font color="#C00000">import</font> <font color="#000000">os</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test a single block structured grid with scalars.</font>
<font color="#a02030">#</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># old style argument passing</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#008000">"png"</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0.0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">10.0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">10.</font><font color="#4000C0">,</font> <font color="#0080C0">10.</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"p"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>


<font color="#C00000">if</font> <font color="#C00000">not</font> <font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">path</font><font color="#4000C0">.</font><font color="#000000">isdir</font><font color="#4000C0">(</font><font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#008000">"current"</font><font color="#4000C0">,</font><font color="#008000">"queries"</font><font color="#4000C0">)</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">mkdir</font><font color="#4000C0">(</font><font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#008000">"current"</font><font color="#4000C0">,</font><font color="#008000">"queries"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">out_base</font> <font color="#4000C0">=</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#008000">"current"</font><font color="#4000C0">,</font><font color="#008000">"queries"</font><font color="#4000C0">,</font><font color="#008000">"xrayimage"</font><font color="#4000C0">)</font>
<font color="#C00000">if</font> <font color="#C00000">not</font> <font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">path</font><font color="#4000C0">.</font><font color="#000000">isdir</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">)</font><font color="#4000C0">:</font>
    <font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">mkdir</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage00.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage00"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage01"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test a multi block structured grid with an array variable.</font>
<font color="#a02030">#</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"d1"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(d, "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"p1"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(p, "zonal")'</font><font color="#4000C0">)</font>

<font color="#000000">DefineArrayExpression</font><font color="#4000C0">(</font><font color="#008000">"da"</font><font color="#4000C0">,</font> <font color="#008000">"array_compose(d1,d1)"</font><font color="#4000C0">)</font>
<font color="#000000">DefineArrayExpression</font><font color="#4000C0">(</font><font color="#008000">"pa"</font><font color="#4000C0">,</font> <font color="#008000">"array_compose(p1,p1)"</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030">#create our own dictionary</font>
<font color="#000000">params</font> <font color="#4000C0">=</font> <font color="#000000">dict</font><font color="#4000C0">(</font><font color="#000000">output_type</font><font color="#4000C0">=</font><font color="#008000">"png"</font><font color="#4000C0">,</font> <font color="#000000">divide_emis_by_absorb</font><font color="#4000C0">=</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#000000">origin</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">10.0</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">up_vector</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">theta</font><font color="#4000C0">=</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#000000">phi</font><font color="#4000C0">=</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#000000">width</font> <font color="#4000C0">=</font> <font color="#0080C0">10.</font><font color="#4000C0">,</font> <font color="#000000">height</font><font color="#4000C0">=</font><font color="#0080C0">10.</font><font color="#4000C0">,</font> <font color="#000000">image_size</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">vars</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#008000">"da"</font><font color="#4000C0">,</font> <font color="#008000">"pa"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage02.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output01.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage03.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage02"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage03"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage04"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test a 2d structured grid with scalars.</font>
<font color="#a02030">#</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"curv2d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030">#retreive default query parameters</font>
<font color="#000000">params</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryParameters</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">)</font>
<font color="#a02030">#modify as necessary</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'image_size'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">)</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'divide_emis_by_absorb'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'width'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">10.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'height'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">10.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'vars'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"p"</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage05.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage05"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage06"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">90</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'phi'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font>  <font color="#0080C0">0</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage07.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage07"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage08"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test an unstructured grid with scalars.</font>
<font color="#a02030">#</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"u1"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((u+10.)*0.01), "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"v1"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((v+10.)*0.01*matvf(mat1,1)), "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"v2"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((v+10.)*0.01*matvf(mat1,2)), "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"v3"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((v+10.)*0.01*matvf(mat1,3)), "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"v4"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((v+10.)*0.01*matvf(mat1,4)), "zonal")'</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">"w1"</font><font color="#4000C0">,</font> <font color="#008000">'recenter(((w+10.)*0.01), "zonal")'</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"globe.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"u"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Do tets.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'phi'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'width'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'height'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">1.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'vars'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"w1"</font><font color="#4000C0">,</font> <font color="#008000">"v1"</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage09.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage09"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage10"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">90</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'width'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">4.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'height'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">4.</font>

<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage11.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage11"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage12"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030"># Do pyramids.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'vars'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"w1"</font><font color="#4000C0">,</font> <font color="#008000">"v2"</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage13.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage13"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage14"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">90</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage15.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage15"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage16"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030"># Do wedges.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'width'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">8.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'height'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">8.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'vars'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"w1"</font><font color="#4000C0">,</font> <font color="#008000">"v3"</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage17.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage17"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>


<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage18"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">90</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'width'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">20.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'height'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">20.</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage19.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage19"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage20"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030"># Do hexes.</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'vars'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#008000">"w1"</font><font color="#4000C0">,</font> <font color="#008000">"v4"</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage21.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage21"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage22"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">params</font><font color="#4000C0">[</font><font color="#008000">'theta'</font><font color="#4000C0">]</font> <font color="#4000C0">=</font> <font color="#0080C0">90</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage23.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage23"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage24"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test with perspective.</font>
<font color="#a02030">#</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"multi_curv3d.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"d"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">params</font> <font color="#4000C0">=</font> <font color="#000000">dict</font><font color="#4000C0">(</font><font color="#000000">output_type</font><font color="#4000C0">=</font><font color="#008000">"png"</font><font color="#4000C0">,</font> <font color="#000000">divide_emis_by_absorb</font><font color="#4000C0">=</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#000000">focus</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">15.0</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">view_up</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.</font><font color="#4000C0">,</font> <font color="#0080C0">1.</font><font color="#4000C0">,</font> <font color="#0080C0">0.</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">normal</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.</font><font color="#4000C0">,</font> <font color="#0080C0">0.</font><font color="#4000C0">,</font> <font color="#0080C0">1.</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">view_angle</font><font color="#4000C0">=</font><font color="#0080C0">30.</font><font color="#4000C0">,</font> <font color="#000000">parallel_scale</font> <font color="#4000C0">=</font> <font color="#0080C0">16.0078</font><font color="#4000C0">,</font> <font color="#000000">near_plane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">32.0156</font><font color="#4000C0">,</font> <font color="#000000">far_plane</font> <font color="#4000C0">=</font> <font color="#0080C0">32.0156</font><font color="#4000C0">,</font> <font color="#000000">image_pan</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.</font><font color="#4000C0">,</font> <font color="#0080C0">0.</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">image_zoom</font> <font color="#4000C0">=</font> <font color="#0080C0">2.4</font><font color="#4000C0">,</font> <font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#000000">image_size</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">vars</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#008000">"d"</font><font color="#4000C0">,</font> <font color="#008000">"p"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage25.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage25"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage26"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#a02030">#</font>
<font color="#a02030"># Test with background intensities.</font>
<font color="#a02030">#</font>
<font color="#000000">DefineArrayExpression</font><font color="#4000C0">(</font><font color="#008000">"wa"</font><font color="#4000C0">,</font> <font color="#008000">"array_compose(w1,w1)"</font><font color="#4000C0">)</font>
<font color="#000000">DefineArrayExpression</font><font color="#4000C0">(</font><font color="#008000">"va"</font><font color="#4000C0">,</font> <font color="#008000">"array_compose(v4,v4)"</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">"globe.silo"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">"Pseudocolor"</font><font color="#4000C0">,</font> <font color="#008000">"u"</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">params</font> <font color="#4000C0">=</font> <font color="#000000">dict</font><font color="#4000C0">(</font><font color="#000000">output_type</font><font color="#4000C0">=</font><font color="#008000">"png"</font><font color="#4000C0">,</font> <font color="#000000">divide_emis_by_absorb</font><font color="#4000C0">=</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#000000">theta</font><font color="#4000C0">=</font><font color="#0080C0">90.</font><font color="#4000C0">,</font> <font color="#000000">phi</font><font color="#4000C0">=</font><font color="#0080C0">0.</font><font color="#4000C0">,</font> <font color="#000000">width</font><font color="#4000C0">=</font><font color="#0080C0">20.</font><font color="#4000C0">,</font> <font color="#000000">height</font><font color="#4000C0">=</font><font color="#0080C0">20.</font><font color="#4000C0">,</font> <font color="#000000">image_size</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">300</font><font color="#4000C0">,</font> <font color="#0080C0">300</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">vars</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#008000">"wa"</font><font color="#4000C0">,</font> <font color="#008000">"va"</font><font color="#4000C0">)</font><font color="#4000C0">,</font> <font color="#000000">background_intensities</font><font color="#4000C0">=</font><font color="#4000C0">(</font><font color="#0080C0">0.05</font><font color="#4000C0">,</font> <font color="#0080C0">0.1</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">Query</font><font color="#4000C0">(</font><font color="#008000">"XRay Image"</font><font color="#4000C0">,</font> <font color="#000000">params</font><font color="#4000C0">)</font>

<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output00.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage27.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>
<font color="#000000">os</font><font color="#4000C0">.</font><font color="#000000">rename</font><font color="#4000C0">(</font><font color="#008000">"output01.png"</font><font color="#4000C0">,</font> <font color="#000000">out_path</font><font color="#4000C0">(</font><font color="#000000">out_base</font><font color="#4000C0">,</font><font color="#008000">"xrayimage28.png"</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage27"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">"xrayimage28"</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">GetQueryOutputString</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">TestText</font><font color="#4000C0">(</font><font color="#008000">"xrayimage29"</font><font color="#4000C0">,</font> <font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font><font color="#000000"></font></font></pre></body></html>
<html><body bgcolor="#e0e0e0"><head><title>rendering/transparency.py</title></head><pre><font face="Lucida,Courier New"><font color="#a02030"># ----------------------------------------------------------------------------</font>
<font color="#a02030">#  CLASSES: nightly</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Test Case:  transparency.py</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Tests:      mesh      - 3D unstructured, single domain</font>
<font color="#a02030">#              plots     - pc, subset</font>
<font color="#a02030">#              operators - none</font>
<font color="#a02030">#              selection - none</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Defect ID:  &#x27;2784 + general transparency testing + &#x27;7772 + &#x27;7773 + &#x27;7879</font>
<font color="#a02030">#</font>
<font color="#a02030">#  Programmer: Hank Childs</font>
<font color="#a02030">#  Date:       November 20, 2002</font>
<font color="#a02030">#</font>
<font color="#a02030"># Modifications:</font>
<font color="#a02030">#   Brad Whitlock, Thu Dec 12 09:56:02 PDT 2002</font>
<font color="#a02030">#   I made the test use the new SubsetAttributes.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Brad Whitlock, Mon Feb 24 10:36:21 PDT 2003</font>
<font color="#a02030">#   I made it use the multiple colors coloring mode for the Subset attributes</font>
<font color="#a02030">#   instead of the single color coloring mode.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Kathleen Bonnell, Thu Aug 28 14:34:57 PDT 2003</font>
<font color="#a02030">#   Remove compound var name from Subset plots.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Hank Childs, Thu May  6 09:34:27 PDT 2004</font>
<font color="#a02030">#   Remove out of date comments regarding test that was recently fixed (&#x27;4878).</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Hank Childs, Mon Feb 12 14:06:10 PST 2007</font>
<font color="#a02030">#   Add tests for rectilinear transparency (&#x27;7772 &amp; &#x27;7773).</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Hank Childs, Thu Mar  8 11:13:49 PST 2007</font>
<font color="#a02030">#   Test transparency after scaling (&#x27;7879) ... that the scale factor in the</font>
<font color="#a02030">#   transparency actor gets set back to 1.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Hank Childs, Wed Dec 31 10:21:31 PST 2008</font>
<font color="#a02030">#   Add a test for multi-block rectilinear grids.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Mark C. Miller, Wed Jan 20 07:37:11 PST 2010</font>
<font color="#a02030">#   Added ability to swtich between Silo&#x27;s HDF5 and PDB data.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Kathleen Biagas, Mon Dec 19 15:45:38 PST 2016</font>
<font color="#a02030">#   Use FilledBoundary plot for materials instead of Subset.</font>
<font color="#a02030">#</font>
<font color="#a02030">#   Eric Brugger, Fri Aug  9 13:45:49 PDT 2024</font>
<font color="#a02030">#   Added a test of combining opaque and transparent plots from</font>
<font color="#a02030">#   multi_ucd3d.silo.</font>
<font color="#a02030">#</font>
<font color="#a02030"># ----------------------------------------------------------------------------</font>




<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;globe.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;FilledBoundary&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mat1&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">fbAtts</font> <font color="#4000C0">=</font> <font color="#000000">FilledBoundaryAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">fbAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.9</font>
<font color="#000000">fbAtts</font><font color="#4000C0">.</font><font color="#000000">colorType</font> <font color="#4000C0">=</font> <font color="#000000">fbAtts</font><font color="#4000C0">.</font><font color="#000000">ColorByMultipleColors</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">fbAtts</font><font color="#4000C0">)</font>

<font color="#a02030"># Test that the normals stick around when we slightly drop the transparency</font>
<font color="#a02030"># (&#x27;2784)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_01&quot;</font><font color="#4000C0">)</font>


<font color="#a02030"># Test that it still looks good when we crank the transparency down.</font>
<font color="#000000">fbAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.4</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">fbAtts</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_02&quot;</font><font color="#4000C0">)</font>


<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
<font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Box&quot;</font><font color="#4000C0">)</font>
<font color="#000000">box</font> <font color="#4000C0">=</font> <font color="#000000">BoxAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">minx</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">4</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxx</font> <font color="#4000C0">=</font> <font color="#4000C0">+</font><font color="#0080C0">2</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">miny</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">6</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxy</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">minz</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">4</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxz</font> <font color="#4000C0">=</font> <font color="#4000C0">+</font><font color="#0080C0">4</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">box</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Make sure that it still looks good when we have solid geometry in there.</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_03&quot;</font><font color="#4000C0">)</font>

<font color="#000000">pcAtts</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.75</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>

<font color="#a02030"># Test having two transparent plots</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_04&quot;</font><font color="#4000C0">)</font>


<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;t&quot;</font><font color="#4000C0">)</font>
<font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Box&quot;</font><font color="#4000C0">)</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">minx</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
<font color="#000000">box</font><font color="#4000C0">.</font><font color="#000000">maxx</font> <font color="#4000C0">=</font> <font color="#0080C0">10</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">box</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Test having two transparent plots + plus one solid geometry plot.</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_05&quot;</font><font color="#4000C0">)</font>


<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>

<font color="#a02030"># Test having three transparent plots, one with zonal centering.  Note:</font>
<font color="#a02030"># this is testing whether or not we can encode zonal-normals as nodal-normals</font>
<font color="#a02030"># and have it play well with other plots that have legitimate nodal-normals.</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_06&quot;</font><font color="#4000C0">)</font>

<font color="#a02030"># Test that it can do transparency correctly for rectilinear grids (&#x27;7772)</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;rect3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.75</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_07&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Test that updates transparency correctly for rectilinear grids (&#x27;7773)</font>
<font color="#a02030"># To test this, we must draw a non-transparent grid first.</font>
<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_08&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.75</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_09&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Histogram&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;d&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_10&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;u&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.75</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_11&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;multi_rect2d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;d&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">ResetView</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_12&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.25</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_13&quot;</font><font color="#4000C0">)</font>

<font color="#a02030"># Test transparency with 3d multi block data</font>
<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;multi_curv3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;d&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">SetOpacityType</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">Constant</font><font color="#4000C0">)</font>
<font color="#000000">pcAtts</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.25</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pcAtts</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">v</font> <font color="#4000C0">=</font><font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.432843</font><font color="#4000C0">,</font> <font color="#0080C0">0.303466</font><font color="#4000C0">,</font> <font color="#0080C0">0.848855</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.0787945</font><font color="#4000C0">,</font> <font color="#0080C0">0.950767</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.299721</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">16.0078</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">32.0156</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">32.0156</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">15</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScaleFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScales</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">shear</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">windowValid</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>
<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_14&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Test both opaque and transparent plots with 3d multi block data</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#000000">silo_data_path</font><font color="#4000C0">(</font><font color="#008000">&quot;multi_ucd3d.silo&quot;</font><font color="#4000C0">)</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Subset&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;mesh1&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">SubsetAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">colorType</font> <font color="#4000C0">=</font> <font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">ColorBySingleColor</font>
<font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">singleColor</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">153</font><font color="#4000C0">,</font> <font color="#0080C0">153</font><font color="#4000C0">,</font> <font color="#0080C0">153</font><font color="#4000C0">,</font> <font color="#0080C0">255</font><font color="#4000C0">)</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>
<font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Slice&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">SliceAtts</font> <font color="#4000C0">=</font> <font color="#000000">SliceAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">SliceAtts</font><font color="#4000C0">.</font><font color="#000000">originType</font> <font color="#4000C0">=</font> <font color="#000000">SliceAtts</font><font color="#4000C0">.</font><font color="#000000">Intercept</font>
<font color="#000000">SliceAtts</font><font color="#4000C0">.</font><font color="#000000">originIntercept</font> <font color="#4000C0">=</font> <font color="#0080C0">2.5</font>
<font color="#000000">SliceAtts</font><font color="#4000C0">.</font><font color="#000000">project2d</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">SliceAtts</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Subset&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;domains(mesh1)&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">s</font> <font color="#4000C0">=</font> <font color="#000000">SubsetAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">s</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.403922</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">s</font><font color="#4000C0">)</font>

<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">GetView3D</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.281187</font><font color="#4000C0">,</font> <font color="#0080C0">0.666153</font><font color="#4000C0">,</font> <font color="#0080C0">0.690778</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">10</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.285935</font><font color="#4000C0">,</font> <font color="#0080C0">0.745284</font><font color="#4000C0">,</font> <font color="#4000C0">-</font><font color="#0080C0">0.602323</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">11.4564</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">22.9129</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">22.9129</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">2.5</font><font color="#4000C0">,</font> <font color="#0080C0">10</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScaleFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScales</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">shear</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">windowValid</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_15&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#a02030"># Test with 3d multi block data</font>
<font color="#000000">OpenDatabase</font><font color="#4000C0">(</font><font color="#008000">&quot;/usr/gapps/visit/data/multi_rect3d.silo&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;x&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;coord(mesh1)[0]&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;y&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;coord(mesh1)[1]&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;z&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;coord(mesh1)[2]&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;radial&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;sqrt((x-0.5)*(x-0.5)+(y-0.5)*(y-0.5)+(z-0.5)*(z-0.5))&quot;</font><font color="#4000C0">)</font>
<font color="#000000">DefineScalarExpression</font><font color="#4000C0">(</font><font color="#008000">&quot;const&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;nodal_constant(&lt;mesh1&gt;, 2.0)&quot;</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;const&quot;</font><font color="#4000C0">)</font>
<font color="#000000">pc</font> <font color="#4000C0">=</font> <font color="#000000">PseudocolorAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">lightingFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">opacityType</font> <font color="#4000C0">=</font> <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">Constant</font>
<font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.4</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pc</font><font color="#4000C0">)</font>

<font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Isovolume&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">isovol</font> <font color="#4000C0">=</font> <font color="#000000">IsovolumeAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">isovol</font><font color="#4000C0">.</font><font color="#000000">lbound</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">isovol</font><font color="#4000C0">.</font><font color="#000000">ubound</font> <font color="#4000C0">=</font> <font color="#0080C0">0.4</font>
<font color="#000000">isovol</font><font color="#4000C0">.</font><font color="#000000">variable</font> <font color="#4000C0">=</font> <font color="#008000">&quot;radial&quot;</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">isovol</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>

<font color="#000000">AddOperator</font><font color="#4000C0">(</font><font color="#008000">&quot;Slice&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">slice</font> <font color="#4000C0">=</font> <font color="#000000">SliceAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">originType</font> <font color="#4000C0">=</font> <font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">Intercept</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">originIntercept</font> <font color="#4000C0">=</font> <font color="#0080C0">0.7</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">axisType</font> <font color="#4000C0">=</font> <font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">XAxis</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">project2d</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">slice</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;const&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">opacity</font> <font color="#4000C0">=</font> <font color="#0080C0">0.7</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pc</font><font color="#4000C0">)</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">originIntercept</font> <font color="#4000C0">=</font> <font color="#0080C0">0.5</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">slice</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">AddPlot</font><font color="#4000C0">(</font><font color="#008000">&quot;Pseudocolor&quot;</font><font color="#4000C0">,</font> <font color="#008000">&quot;const&quot;</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">opacityType</font> <font color="#4000C0">=</font> <font color="#000000">pc</font><font color="#4000C0">.</font><font color="#000000">FullyOpaque</font>
<font color="#000000">SetPlotOptions</font><font color="#4000C0">(</font><font color="#000000">pc</font><font color="#4000C0">)</font>
<font color="#000000">slice</font><font color="#4000C0">.</font><font color="#000000">originIntercept</font> <font color="#4000C0">=</font> <font color="#0080C0">0.3</font>
<font color="#000000">SetOperatorOptions</font><font color="#4000C0">(</font><font color="#000000">slice</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">DrawPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">v</font> <font color="#4000C0">=</font> <font color="#000000">View3DAttributes</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewNormal</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.786444</font><font color="#4000C0">,</font> <font color="#0080C0">0.436457</font><font color="#4000C0">,</font> <font color="#0080C0">0.437048</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">focus</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewUp</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#4000C0">-</font><font color="#0080C0">0.599183</font><font color="#4000C0">,</font> <font color="#0080C0">0.367316</font><font color="#4000C0">,</font> <font color="#0080C0">0.711378</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">viewAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">30</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">parallelScale</font> <font color="#4000C0">=</font> <font color="#0080C0">0.866025</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">nearPlane</font> <font color="#4000C0">=</font> <font color="#4000C0">-</font><font color="#0080C0">1.73205</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">farPlane</font> <font color="#4000C0">=</font> <font color="#0080C0">1.73205</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imagePan</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">imageZoom</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">perspective</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">eyeAngle</font> <font color="#4000C0">=</font> <font color="#0080C0">2</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotationSet</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">centerOfRotation</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">,</font> <font color="#0080C0">0.5</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScaleFlag</font> <font color="#4000C0">=</font> <font color="#0080C0">0</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">axis3DScales</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">shear</font> <font color="#4000C0">=</font> <font color="#4000C0">(</font><font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">0</font><font color="#4000C0">,</font> <font color="#0080C0">1</font><font color="#4000C0">)</font>
<font color="#000000">v</font><font color="#4000C0">.</font><font color="#000000">windowValid</font> <font color="#4000C0">=</font> <font color="#0080C0">1</font>
<font color="#000000">SetView3D</font><font color="#4000C0">(</font><font color="#000000">v</font><font color="#4000C0">)</font>

<font color="#000000">Test</font><font color="#4000C0">(</font><font color="#008000">&quot;transparency_16&quot;</font><font color="#4000C0">)</font>

<font color="#000000">DeleteAllPlots</font><font color="#4000C0">(</font><font color="#4000C0">)</font>

<font color="#000000">Exit</font><font color="#4000C0">(</font><font color="#4000C0">)</font>
<font color="#000000"></font></font></pre></body></html>